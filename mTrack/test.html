<!-- HTML Structure to Display Data -->
<div id="data-container"></div>
<script>
  async function summonerSearch() {
    var url = "http://10.0.0.150/summonerSearch";

    var responseParagraph = document.getElementById('responseParagraph');
    var summonerName = document.getElementById("nameInput").value;
    console.log("Summoner Name:", summonerName);
    await fetch(url, {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: summonerName
    })
    .then(function(response) {
        // Check if the response was successful
        if (response.ok) {
            return response.text(); // Convert response to text
        } else {
            throw new Error('Error: ' + response.status); // Throw an error
        }
    })
    .then(function(data) {
        responseParagraph.textContent = data; // Display response data in paragraph
        //location.reload();
    })
    .catch(function(error) {
        responseParagraph.textContent = error.message;
        printMatches(data.gameData, data.playerStats); // Display error message
    });
  }

  async function printMatches(gameData, playerStats) {
    // Assuming gameData and playerStats are available as arrays of objects
    const gameData = gameData;
    const playerStats = playerStats;

    // Loop through the arrays simultaneously using forEach
    gameData.forEach((row1, index) => {
      const row2 = playerStats[index];

      // Check if the sumName values are equal
      if (row2.sumName === ingres) {
        // Create a new div element
        const container = document.createElement('div');
        container.classList.add('bg-secondary', 'main-container', 'px-5');

        // Build the HTML content inside the div
        container.innerHTML = `
          <div class="nested-container">
            <div class="nested-container">
              <p class="match-card-text">${row1.gameID}</p>
            </div>
            <div class="nested-container">
              <p class="match-card-text">${row1.gameVer}</p>
            </div>
          </div>
          <div class="nested-container">
            <div class="nested-container">
              <p class="match-card-text">${row1.gameDurationMinutes}</p>
            </div>
            <div class="nested-container">
              <p class="match-card-text">${row2.champLevel}</p>
            </div>
          </div>
          <div class="nested-container">
            <div class="nested-container">
              <p class="match-card-text">${row2.kills}/${row2.deaths}/${row2.assists}</p>
            </div>
            <div class="nested-container">
              <p class="match-card-text">${row2.Champ}</p>
            </div>
          </div>
          <div class="nested-container">
            <div class="nested-container">
              <p class="match-card-text">${row2.sumName}</p>
            </div>
            <div class="nested-container">
              <p class="match-card-text">${row2.playerTeamID}</p>
            </div>
          </div>
        `;

        // Append the container to the data-container
        document.getElementById('data-container').appendChild(container);
      }
    });
  }
</script>